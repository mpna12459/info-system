<!DOCTYPE html>
<html>
<head>
    <title>测试Supabase RPC</title>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
    <h2>测试 RPC 函数</h2>
    <button onclick="testRpc()">点击测试</button>
    <pre id="output">结果将显示在这里...</pre>
    
    <script>
        // ⚠️ 直接在这里填写你的配置 ⚠️
        const SUPABASE_URL = 'https://dpaltfyvquazwxcwylwm.supabase.co';
        const ANON_KEY = 'sb_publishable_h6RPugXK2sWtCOMeSR9qdA_AaeihNuj';
        const FUNCTION_NAME = 'lookup_members';
        
        async function testRpc() {
            const output = document.getElementById('output');
            output.textContent = '正在调用...';
            
            try {
                const supabase = window.supabase.createClient(SUPABASE_URL, ANON_KEY);
                const { data, error } = await supabase.rpc(FUNCTION_NAME);
                
                if (error) throw error;
                
                output.textContent = JSON.stringify(data, null, 2);
                console.log('成功:', data);
                
            } catch (error) {
                output.textContent = `错误: ${error.message}`;
                console.error('失败:', error);
            }
        }
        
        console.log('配置:', { SUPABASE_URL, FUNCTION_NAME });
    </script>
</body>
</html>
