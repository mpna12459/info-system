<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supabase RPC 函数调用演示</title>
    <link rel="stylesheet" href="style.css">
    <!-- 引入Supabase客户端库 -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
    <div class="container">
        <h1>📡 Supabase RPC 函数调用演示</h1>
        
        <div class="config-section">
            <h2>🔧 配置设置</h2>
            <div class="form-group">
                <label for="supabaseUrl">Supabase URL:</label>
                <input type="text" id="supabaseUrl" placeholder="https://your-project.supabase.co">
            </div>
            <div class="form-group">
                <label for="anonKey">匿名密钥 (anon key):</label>
                <input type="password" id="anonKey" placeholder="eyJhbGciOiJIUzI1NiIs...">
            </div>
            <button onclick="initSupabase()">初始化客户端</button>
            <div id="initStatus" class="status"></div>
        </div>

        <div class="rpc-section">
            <h2>🚀 调用RPC函数</h2>
            <div class="form-group">
                <label for="functionName">函数名称:</label>
                <input type="text" id="functionName" value="get_user_count" placeholder="例如：get_user_count">
            </div>
            <div class="form-group">
                <label for="functionParams">参数 (JSON格式):</label>
                <textarea id="functionParams" rows="3" placeholder='{"status": "active"}'></textarea>
            </div>
            <button onclick="callRpcFunction()">调用RPC函数</button>
            
            <div class="result-section">
                <h3>📊 执行结果</h3>
                <div class="status-box">
                    <div class="status-header">
                        <span>状态: </span>
                        <span id="statusText">等待调用...</span>
                    </div>
                    <pre id="resultOutput">{
  "message": "这里将显示RPC函数的返回值"
}</pre>
                </div>
            </div>
        </div>

        <div class="instructions">
            <h2>📚 使用说明</h2>
            <ol>
                <li>从Supabase仪表板的 Settings > API 获取你的URL和匿名密钥</li>
                <li>输入Supabase项目URL和匿名密钥</li>
                <li>点击"初始化客户端"</li>
                <li>输入要调用的RPC函数名称</li>
                <li>如果需要参数，以JSON格式输入</li>
                <li>点击"调用RPC函数"</li>
            </ol>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
